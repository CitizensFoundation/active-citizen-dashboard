<html><head><meta charset="UTF-8"><link rel="import" href="../dashboard-app.html"></head><body><dom-module id="ac-news-item-classification">

  <template>

    <style include="iron-flex iron-flex-alignment">
      :host {
        display: block;
        padding: 10px;
      }

      .dont-break-out {

        /* These are technically the same, but use both */
        overflow-wrap: break-word;
        word-wrap: break-word;

        -ms-word-break: break-all;
        /* This is the dangerous one in WebKit, as it breaks things wherever */
        word-break: break-all;
        /* Instead use this non-standard one: */
        word-break: break-word;

        /* Adds a hyphen where the word breaks, if supported (No Blink) */
        -ms-hyphens: auto;
        -moz-hyphens: auto;
        -webkit-hyphens: auto;
        hyphens: auto;

      }

      h1 {
        font-size: 22px;
        color: #212121;
      }

      paper-material {
        background-color: #FFF;
        padding: 16px;
        margin-top: 24px;
        min-height: 420px;
      }

      paper-slider {
        margin-top: 16px;
        width: 350px;
        --paper-slider-height: 5px;
        --paper-slider-active-color: var(--google-red-500);
      }

      .container {
        @apply(--layout-center-center);
      }

      .top {
        width: 100%;
      }

      .link {
        margin-top: 16px;
        padding-bottom: 24px;
        border-color: #777;
      }

      .description {
        font-size: 19px;
      }

      .ratingHeader {
        font-size: 20px;
        font-weight: bold;
      }

      .linkInfoText {
        color: #aaa;
      }

      .author {
        padding-left: 8px;
      }

      .content {
        padding-top: 16px;
      }

      .sliderNumber {
        color: #555;
      }

      .ratingContainer {
        padding-top: 16px;
      }

      .next {
        margin-top: 16px;
      }

      .raingText {
        color: #999;
        font-size: 24px;
      }

      .mainContentArea {
        width: 420px;
        max-width: 420px;
        padding: 8px;
      }

      .ratingArea {
        width: 280px;
        padding: 16px;
        padding-left: 24px;
        color: #fff;
        background-color: var(--app-primary-color);
      }

      .mainHeader {
        font-size: 22px;
        padding-bottom: 12px;
        color: #000;
        font-weight: bold;
        padding-left: 0;
      }

      @media (max-width: 420px) {
        .mainContentArea {
          width: 300px;
          max-width: 300px;
        }

        .ratingArea {
          width: 280px;
        }
      }

      .ratingInfo {
        padding-top: 8px;
      }
    </style>

    <div class="top">
      <div class="layout vertical center-center container">
        <paper-material elevation="4">
          <div class="layout horizontal">
          </div>
          <div class="layout horizontal wrap">

            <div class="layout vertical mainContentArea">
              <div class="mainHeader">Classify Relevancy of Social Media Posts</div>

              <ac-news-item item="[[response]]"></ac-news-item>

              <div class="next layout horizontal center-center">
                <paper-button raised="" on-tap="_next">Skip</paper-button>
                <paper-button raised="" on-tap="_irrelevant">Irrelevant</paper-button>
              </div>
            </div>

            <div class="layout vertical ratingArea">
              <div class="layout horizontal center-center ratingHeader">
                Classify for Youth Mobility
              </div>
              <ac-rating-category on-rated="_rated" category-name="Finance"></ac-rating-category>
              <ac-rating-category on-rated="_rated" category-name="Housing"></ac-rating-category>
              <ac-rating-category on-rated="_rated" category-name="University"></ac-rating-category>
              <ac-rating-category on-rated="_rated" category-name="Other"></ac-rating-category>
              <div class="layout horizontal center-center ratingInfo">
                Total [[totalRated]] rated of [[totalCount]]
              </div>
            </div>
          </div>
        </paper-material>
      </div>
    </div>

    <yp-ajax id="getNextToClassifyAjax" method="GET" url="/api/news_items/next_to_rate" on-response="_nextResponse"></yp-ajax>
    <yp-ajax id="classifyItemAjax" method="PUT" on-response="_classifyDone"></yp-ajax>
    <yp-ajax id="getRatingStats" method="GET" url="/api/news_items/rating_stats" on-response="_statsResponse"></yp-ajax>
    <yp-ajax id="getItemToClassifyAjax" method="GET" url="/api/news_items/get_item/[[itemId]]" on-response="_nextResponse"></yp-ajax>

  </template>

  <script>Polymer({is:"ac-news-item-classification",properties:{response:{type:Object},itemId:{type:Number,observer:"_itemIdChanged"},totalRated:Number,totalCount:Number},ready:function(){this._next()},_itemIdChanged:function(e){e&&this.$.getItemToClassifyAjax.generateRequest()},_nextResponse:function(e,t){this.set("response",t.response),this.set("itemId",null)},_statsResponse:function(e,t){this.set("totalRated",this.formatNumber(t.response.totalRated)),this.set("totalCount",this.formatNumber(t.response.totalCount))},formatNumber:function(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"},_next:function(){this.$.getNextToClassifyAjax.generateRequest(),this.$.getRatingStats.generateRequest()},_classifyDone:function(e){this.set("response",null),this._next()},_irrelevant:function(){this._rated(null,{ratingValue:-1,categoryName:"other"})},_rated:function(e,t){this.$.classifyItemAjax.url="/api/news_items/"+this.response.id+"/rate",this.$.classifyItemAjax.body={ratingValue:t.ratingValue,ratingCategoryName:t.categoryName},this.$.classifyItemAjax.generateRequest()},_responseChanged:function(e){}});</script>

</dom-module>
</body></html>